/*
 LightBoss version 1.0
 Powered by Philippe Assis
 www.philippeassis.com
*/
(function ($) {
$.fn.lightboss=function(c,d){c=$.extend({event:"click",gif:"default",effectTrans:"resize",maxHeight:600,maxWidth:1E3,timeStar:250,timeTrans:250,timeDisplayPreLoad:250,timeClose:250,attr:"href",print:"append",DOMprint:"body",navigation:!1,navigationEffect:!0,navigationTimeEffect:!1,arrowsPositionValue:!1,arrowsPosition:"in",log:!1,background:"black",clone:!1,tools:[function(){return $("<a>").addClass("close")}]},c);d=$.extend({ini:function(){},winSize:function(){},verificBrowser:function(){},startBoss:function(){},
    linkType:function(){},loadBox:function(){},openBox:function(){},getAttrLoad:function(){},boxPosition:function(){},closeBox:function(){},navigation:function(){},nameElements:function(){},styleArrows:function(){},controlArrows:function(){},activeArrows:function(){},createArrows:function(){},finishPrint:function(){},limitMax:function(){},startTools:function(){},navHtmlArrows:!1,html:!1},d);var b={},a={};b.ini=function(e){b.c_log("ini");c.elementCurrent=e;d.ini.call(e,c,b,a);b.winSize();b.verificBrowser();
    a.eThis=$(e);c.navigation&&!a.refCurrent&&(a.refCurrent=eval(a.eThis.attr("ref")));b.startBoss();return!1};b.startBoss=function(){b.c_log("startBoss");d.startBoss.call(a.currentStage,c,b,a);hrefLink=a.eThis.attr(c.attr);a.linkType=b.linkType(hrefLink);d.html?(funcHtml=d.html.call(a.currentStage,c,b,a),a.eventLoad=funcHtml[0],a.targetLoad=funcHtml[1],a.dinamicHtml=funcHtml[2]):"image"==a.linkType?(a.eventLoad="load",a.dinamicHtml=$("<img>"),a.dinamicHtml.attr("src",hrefLink),a.dinamicHtml='<img src="'+
    hrefLink+'" alt="'+hrefLink+'"/>',a.targetLoad="img"):"div"==a.linkType?(a.eventLoad="ready",div_target="start"==c.event?a.elementsAll:hrefLink,a.dinamicHtml=c.clone?$(div_target).clone():$(div_target),a.dinamicHtml.show(),a.targetLoad=hrefLink):"iframe"==a.linkType&&(a.eventLoad="load",a.dinamicHtml=$("<iframe>"),a.dinamicHtml.attr({frameBorder:0,height:c.maxHeight,width:c.maxWidth,src:hrefLink}),a.targetLoad="iframe");a.elightboss.fadeIn(c.timeStar,function(){a.currentStage="image"==a.linkType?
    a.eLoad.html(a.dinamicHtml):a.dinamicHtml.appendTo(a.eLoad);b.loadBox()});$(".content").bind({mouseleave:function(){a.enterBox=!1},mouseenter:function(){a.enterBox=!0}});a.elightboss.click(function(){!1===a.enterBox&&b.closeBox()});$(document).bind({keydown:function(a){if(27==a.keyCode)return b.closeBox(),!1}});$("a,li,img",a.eTools).bind({click:function(){b.closeBox()},mouseenter:function(){$(this).animate({opacity:"1.0"},0)},mouseleave:function(){$(this).animate({opacity:"0.8"},250)}})};b.loadBox=
    function(){b.c_log("loadBox");d.loadBox.call(a.currentStage,c,b,a);"image"==a.linkType||"iframe"==a.linkType?$(a.targetLoad,a.eLoad).bind(a.eventLoad,function(){b.openBox()}):"div"==a.linkType&&b.openBox()};b.limitMax=function(){b.c_log("limitMax");d.limitMax.call(a.currentStage,c,b,a);heimax=$(window).height()-80;c.maxHeight&&c.maxHeight<heimax&&(heimax=c.maxHeight);$("#"+a.lightBossName+" img").css({"max-height":heimax+"px"});widmax=$(window).width()-80;c.maxWidth&&c.maxWidth<widmax&&(widmax=c.maxWidth);
    $("#"+a.lightBossName+" img").css({"max-width":widmax+"px"})};b.openBox=function(){b.c_log("openBox");d.openBox.call(a.currentStage,c,b,a);"image"==a.linkType&&b.limitMax();b.getAttrLoad();a.epreLoader.stop().fadeOut(c.timeEffectLoad,function(){b.boxPositionAndEffect();a.oppenBox=!0});$(window).bind({resize:function(){b.boxPositionAndEffect(0,!0)}})};b.startTools=function(){b.c_log("startTools");d.startTools.call(a.currentStage,c,b,a);a.eTools.fadeIn(200);a.eTools.css("opacity","0.8");b.initnavis()};
    b.boxPositionAndEffect=function(e,f){b.c_log("boxPositionAndEffect");d.boxPosition.call(a.currentStage,c,b,a);c.navigation&&a.arrowsAll&&!f&&a.arrowsAll.fadeOut(c.timeTrans/2);newPropElement={width:a.widthLoad+"px",height:a.heightLoad+"px","margin-top":(eval(a.winSizeH)-eval(a.heightLoad))/2+"px",padding:"5px"};"iframe"==a.linkType&&(Iframe=$(".load iframe",a.elightboss),newPropElement["padding-left"]="5px",newPropElement["padding-top"]="5px",newPropElement["padding-right"]="5px",newPropElement["padding-bottom"]=
        "5px",$(a.eTools).css("margin-right","-25px"),$(Iframe).height()>a.heightLoad&&(newPropElement["padding-right"]="20px",$(a.eTools).css("margin-right","-40px")),$(Iframe).width()>a.widthLoad&&(newPropElement["padding-bottom"]="15px"));0!==e?"resize"==c.effectTrans?a.eContent.animate(newPropElement,c.timeTrans,function(){b.finishPrint()}):"fade"==c.effectTrans?a.eContent.fadeOut(c.timeTrans,function(){$(this).css(newPropElement).fadeIn(c.timeTrans,function(){b.finishPrint()})}):(a.eContent.css(newPropElement),
        a.eLoad.fadeIn(c.timeEffectLoad),b.finishPrint()):(a.eContent.css(newPropElement),a.eLoad.fadeIn(c.timeEffectLoad))};b.finishPrint=function(){b.c_log("finishPrint");d.finishPrint.call(a.currentStage,c,b,a);a.eLoad.fadeIn(c.timeDisplayPreLoad,function(){b.startTools();b.getAttrLoad()});b.c_log(a.refCurrent)};b.initnavis=function(){b.c_log("initnavis");c.navigation&&!a.navExecute&&b.navigation();c.navigation&&b.styleArrows(!0)};b.getAttrLoad=function(){b.c_log("getAttrLoad");d.getAttrLoad.call(a.currentStage,
        c,b,a);$(".load",a.elightboss).width()&&"iframe"!=a.linkType?a.widthLoad=$(".load",a.elightboss).width():(Iframe=$(".load iframe",a.elightboss),Iframe=$(Iframe[0]).width(),a.widthLoad=Iframe<c.maxWidth&&0<Iframe?Iframe:c.maxWidth);$(".load",a.elightboss).height()&&"iframe"!=a.linkType?a.heightLoad=$(".load",a.elightboss).height():(Iframe=$(".load iframe",a.elightboss),Iframe=$(Iframe).height(),a.heightLoad=Iframe<c.maxHeight&&0<Iframe?Iframe:c.maxHeight)};b.linkType=function(e){b.c_log("getlo.linkType");
        d.linkType.call(a.currentStage,c,b,a);if(void 0==e&&"start"==c.event)return"div";if(void 0==e)return!1;if("#"==e.substring(0,1))return"div";Limg=e.split(".").reverse();Limg=Limg[0].toLowerCase();return"jpg"==Limg||"jpeg"==Limg||"jpe"==Limg||"jfif"==Limg||"png"==Limg||"tiff"==Limg||"tif"==Limg||"gif"==Limg||"ico"==Limg||"dib"==Limg||"bmp"==Limg?"image":"iframe"};b.winSize=function(){b.c_log("winSize");d.winSize.call(a.currentStage,c,b,a);$(window).bind({resize:function(){a.winSizeW=$(window).width();
        a.winSizeH=$(window).height()}});$(document).ready(function(){a.winSizeW=$(window).width();a.winSizeH=$(window).height()})};b.closeBox=function(){b.c_log("closeBox");d.closeBox.call(a.currentStage,c,b,a);a.elightboss.fadeOut(c.timeClose,function(){a.eContent.attr("style","").css({width:"100px",height:"100px"});a.epreLoader.attr("style","");a.eLoad.attr("style","").hide().html("");a.eTools.hide();c.navigation&&(a.arrowsAll&&a.arrowsAll.hide(),c.timeEffectLoad=a.timeEffectLoad_save,c.effectTrans=a.effectTrans_save,
        a.navExecute=!1);a.refCurrent=!1;a.elementCurrent=!1;a.oppenBox=!1})};b.verificBrowser=function(){b.c_log("verificBrowser");d.verificBrowser.call(a.currentStage,c,b,a)};b.navigation=function(){b.c_log("navigation");d.navigation.call(a.currentStage,c,b,a);a.FirstNav=!1;void 0==a.arrowsAll&&(a.elightboss.append(b.navHtmlArrows("left")),a.elightboss.append(b.navHtmlArrows("right")),a.arrowLeft=$(".arrows.left",a.elightboss),a.arrowRight=$(".arrows.right",a.elightboss),a.arrowsAll=$(".arrows.left,.arrows.right",
        a.elightboss));b.controlArrows();b.styleArrows(!1);a.arrowsAll.fadeIn()};b.arrowsPositions=function(){b.c_log("arrowsPositions");"in"==c.arrowsPosition&&!1==c.arrowsPositionValue?c.arrowsPositionValue=0:"out"==c.arrowsPosition&&!1==c.arrowsPositionValue&&(c.arrowsPositionValue=60)};b.styleArrows=function(e){b.c_log("styleArrows");d.styleArrows.call(a.currentStage,c,b,a);b.arrowsPositions();a.navExecute=!0;opacityArrows="0.3";!1===e?(exprecionPosition=a.winSizeW/2-$(a.targetLoad,e).width()/2+10+"px",
        a.arrowsAll.addClass("default"),a.arrowLeft.css({opacity:opacityArrows,left:"-"+exprecionPosition}).bind({mouseenter:function(){$(this).animate({opacity:"1.0"},150)},mouseleave:function(){$(this).animate({opacity:opacityArrows},250)}}),a.arrowRight.css({opacity:opacityArrows,right:exprecionPosition}).bind({mouseenter:function(){$(this).animate({opacity:"1.0"},150)},mouseleave:function(){$(this).animate({opacity:opacityArrows},250)}}),$(window).resize(function(){a.arrowLeft.css({opacity:opacityArrows,
        left:a.winSizeW/2-$(a.targetLoad,a.eLoad).width()/2+(10-eval(c.arrowsPositionValue))+"px"});a.arrowRight.css({opacity:opacityArrows,right:a.winSizeW/2-$(a.targetLoad,a.eLoad).width()/2+(10-eval(c.arrowsPositionValue))+"px"})})):(a.arrowLeft.css({opacity:opacityArrows,left:a.winSizeW/2-$(a.targetLoad,a.eLoad).width()/2+(10-eval(c.arrowsPositionValue))+"px"}),a.arrowRight.css({opacity:opacityArrows,right:a.winSizeW/2-$(a.targetLoad,a.eLoad).width()/2+(10-eval(c.arrowsPositionValue))+"px"}),a.arrowsAll.show());
        d.styleArrows.call(a.currentStage,c,b,a);a.navExecute=!1};b.controlArrows=function(){b.c_log("controlArrows");d.controlArrows.call(a.currentStage,c,b,a);$(a.arrowLeft).click(function(){b.activeArrows("prev");return!1});$(a.arrowRight).click(function(){b.activeArrows("next");return!1});$(document).bind({keydown:function(b){if(!c.navigation||!a.oppenBox)return!1;if(37==b.keyCode)return $(a.arrowLeft).click(),!1;if(39==b.keyCode)return $(a.arrowRight).click(),!1}})};b.c_log=function(a){c.log&&console.log(a)};
    b.activeArrows=function(e){b.c_log("activeArrows");if(!0===a.navExecute)return!1;!1===a.navExecute&&(a.navExecute=!0,d.activeArrows.call(a.currentStage,c,b,a),"prev"==e?a.refCurrent=0<a.refCurrent?a.refCurrent-1:a.refLength-1:"next"==e&&(refLimit=a.refLength-1,a.refCurrent=a.refCurrent<refLimit?a.refCurrent+1:0),a.epreLoader.css({position:"absolute",top:"50%",left:"50%","margin-top":"-50px","margin-left":"-50px"}),a.eThis=$(".linkboss[ref="+a.refCurrent+"]"),a.elementCurrent=a.eThis,c.navigationEffect||
        (c.effectTrans=0,c.timeEffectLoad=0),c.navigationTimeEffect&&(c.timeEffectLoad=c.navigationTimeEffect),a.arrowsAll.stop().fadeOut(100),a.eLoad.fadeOut(250,function(){void 0!=a.arrowsAll&&b.c_log(a.refCurrent);$(this).attr("display","none");a.epreLoader.fadeIn(0);b.startBoss()}))};b.navHtmlArrows=function(e){b.c_log("navHtmlArrows");return d.navHtmlArrows?d.navHtmlArrows.call(a.currentStage,c,b,a):'<div class="arrows '+e+'" style="display:none"></div>'};b.nameElements=function(e){b.c_log("nameElements");
        d.nameElements.call(a.currentStage,c,b,a);ParentAll=$(e);for(i=0;ParentAll.length>i;i++)$(ParentAll[i]).attr("ref",i)};b.createTools=function(){b.c_log("createTools");Tools="";List=$("<li>");if(c.tools)for(i=0;c.tools.length>i;i++)Obj=c.tools[i].call(a.currentStage,c,b,a),Obj.appendTo(List);return List};for(countBox=0;$("#lightboss-"+countBox).is("div");)++countBox;a.lightBossName="lightboss-"+countBox;a.htmlLightbox=$("<div>").attr({id:a.lightBossName,"class":"lightboss-style "+c.background});List=
        b.createTools();Content=$("<div>").attr({"class":"content"});Tools=$("<div>").attr({"class":"tools"}).css("display","none");Loader=$("<div>").attr({"class":"loader"});Load=$("<div>").attr({"class":"load"}).css("display","none");List.appendTo(Tools);Tools.appendTo(Content);Loader.appendTo(Content);Load.appendTo(Content);Content.appendTo(a.htmlLightbox);"prepend"==c.print?$(c.DOMprint).prepend(a.htmlLightbox):"append"==c.print?$(c.DOMprint).append(a.htmlLightbox):"before"==c.print?$(c.DOMprint).before(a.htmlLightbox):
        "after"==c.print&&$(c.DOMprint).after(a.htmlLightbox);a.elightboss=$("#"+a.lightBossName);a.eContent=$(".content",a.elightboss);a.eLoad=$(".load",a.eContent);a.epreLoader=$(".loader",a.eContent);a.eTools=$(".tools",a.eContent);a.elementsAll=$(this);a.eThis;a.elightboss.hide();a.eLoad.hide();a.epreLoader.addClass(c.gif);a.targetLoad;a.linkType;a.eventLoad;a.widthLoad;a.heightLoad;a.winSizeW;a.winSizeH;a.elementCurrent;a.enterBox=!1;a.oppenBox=!1;c.navigation&&1<$(this).length?(a.refCurrent,a.refLength=
        eval($(this).length),b.nameElements($(this)),a.arrowLeft,a.arrowRight,a.arrowsAll,void 0==a.navExecute&&(a.navExecute=!1),a.effectTrans_save=c.effectTrans,a.timeEffectLoad_save=c.timeEffectLoad):c.navigation=!1;a.elementsAll.addClass("linkboss");if("start"==c.event)return b.ini(a.elementsAll);a.elementsAll.bind(c.event,function(){return b.ini(this)})};
})(jQuery);